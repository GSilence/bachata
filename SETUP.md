# Инструкция по настройке проекта

## Шаг 1: Установка зависимостей

```bash
npm install
```

## Шаг 2: Настройка базы данных

Подробная инструкция по настройке БД находится в [`docs/database-setup.md`](./docs/database-setup.md)

**Кратко:**
1. Установите MySQL или используйте Docker
2. Создайте `.env` файл с `DATABASE_URL`
3. Выполните: `npm run db:generate && npm run db:push`
4. (Опционально) `npm run db:seed` для тестовых данных

## Шаг 3: Подготовка аудио файлов

### Голосовые сэмплы
Поместите следующие файлы в `public/audio/voice/`:
- `one.mp3` - голос говорит "One"
- `five.mp3` - голос говорит "Five"
- `1.mp3`, `2.mp3`, `3.mp3`, `4.mp3`, `5.mp3`, `6.mp3`, `7.mp3`, `8.mp3` - для режима Full

### Музыкальные треки
Поместите MP3 файлы в `public/music/`

### Добавление треков в БД

Вы можете добавить треки через Prisma Studio:
```bash
npm run db:studio
```

Или через SQL:
```sql
INSERT INTO Track (title, artist, filename, bpm, offset, isFree) 
VALUES ('Название трека', 'Исполнитель', 'filename.mp3', 120, 0.5, true);
```

**Важно:** 
- `bpm` - удары в минуту (например, 120)
- `offset` - смещение первого бита в секундах от начала трека (например, 0.5)
- `filename` - имя файла в папке `public/music/`

## Шаг 4: Запуск приложения

### Режим разработки
```bash
npm run dev
```

Приложение будет доступно по адресу [http://localhost:3000](http://localhost:3000)

### Production сборка
```bash
npm run build
npm start
```

## Шаг 5: Docker (опционально)

Для запуска через Docker:

```bash
docker-compose up -d
```

## Проверка работы

1. Откройте приложение в браузере
2. Убедитесь, что в плейлисте есть треки
3. Выберите трек из плейлиста
4. Нажмите Play
5. Проверьте, что:
   - Визуализация счета работает (цифры меняются)
   - Голосовой счет воспроизводится (если включен)
   - Громкость регулируется
   - Progress bar обновляется

## Решение проблем

### Ошибка подключения к БД
- Проверьте `DATABASE_URL` в `.env`
- Убедитесь, что MySQL запущен
- Проверьте права доступа пользователя БД

### Аудио не воспроизводится
- Проверьте, что файлы находятся в правильных папках
- Проверьте консоль браузера на ошибки
- Убедитесь, что пути к файлам в БД корректны

### Prisma ошибки
- Запустите `npm run db:generate` после изменения schema.prisma
- Используйте `npm run db:push` для применения изменений схемы

