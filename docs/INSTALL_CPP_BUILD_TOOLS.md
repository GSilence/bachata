# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ C++ Build Tools –¥–ª—è Windows

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ **madmom** –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä C/C++. –ù–∞ Windows —ç—Ç–æ **Microsoft Visual C++ Build Tools**.

## –®–∞–≥ 1: –°–∫–∞—á–∏–≤–∞–Ω–∏–µ Build Tools

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç Microsoft:
   **https://visualstudio.microsoft.com/visual-cpp-build-tools/**

2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–°–∫–∞—á–∞—Ç—å Build Tools"** (Download Build Tools)

   –ò–ª–∏ –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞:
   **https://aka.ms/vs/17/release/vs_buildtools.exe**

## –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫** (`vs_buildtools.exe`)

2. –ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø—Ä–æ—Å –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ - –Ω–∞–∂–º–∏—Ç–µ **"–î–∞"**

3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞ (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç)

4. –í –æ–∫–Ω–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —Ä–∞–±–æ—á–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ (Workloads)

5. **–í—ã–±–µ—Ä–∏—Ç–µ:**

   - ‚úÖ **"C++ build tools"** (Desktop development with C++)

   –í –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω—ã:

   - ‚úÖ **MSVC v143 - VS 2022 C++ x64/x86 build tools**
   - ‚úÖ **Windows 10/11 SDK** (–ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è)
   - ‚úÖ **CMake tools for Windows** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

6. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"** (Install) –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É

7. **–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏** (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 20-40 –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)

   - –†–∞–∑–º–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–∫–∏: ~3-6 GB
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–∫–ª—é—á–∞–µ—Ç:
     - –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä MSVC
     - Windows SDK
     - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏

## –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

1. **–í–ê–ñ–ù–û: –ó–∞–∫—Ä–æ–π—Ç–µ –í–°–ï –æ–∫–Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞/PowerShell** (–µ—Å–ª–∏ –æ–Ω–∏ –æ—Ç–∫—Ä—ã—Ç—ã)

2. **–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª** (PowerShell –∏–ª–∏ Command Prompt)

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞:**

   ```powershell
   where cl
   ```

   –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç, –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é (—Å–º. –Ω–∏–∂–µ)

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Visual Studio (–µ—Å–ª–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω):**

   –ù–∞–π–¥–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –û–±—ã—á–Ω–æ –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–¥–µ—Å—å:

   ```powershell
   # –î–ª—è Visual Studio 2022 Build Tools
   & "C:\Program Files\Microsoft Visual Studio\2022\BuildTools\VC\Auxiliary\Build\vcvars64.bat"

   # –ò–ª–∏ –¥–ª—è Visual Studio 2022 Community/Professional
   & "C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\vcvars64.bat"
   ```

   **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ "Developer Command Prompt for VS" –∏–∑ –º–µ–Ω—é –ü—É—Å–∫:

   - –ù–∞–∂–º–∏—Ç–µ Win + S
   - –í–≤–µ–¥–∏—Ç–µ "Developer Command Prompt"
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ "Developer Command Prompt for VS 2022"
   - –í —ç—Ç–æ–º –æ–∫–Ω–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

5. **–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
   ```powershell
   .\venv\Scripts\Activate.ps1
   ```

## –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ madmom

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å madmom:

```powershell
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Cython —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
pip install Cython setuptools wheel

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ madmom
pip install madmom>=0.16.1
```

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 5-15 –º–∏–Ω—É—Ç (–∫–æ–º–ø–∏–ª—è—Ü–∏—è –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤).

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```powershell
python -c "from madmom.features.beats import RNNDownBeatProcessor; print('Madmom OK!')"
```

–ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ `Madmom OK!`, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! üéâ

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±: –ß–µ—Ä–µ–∑ Visual Studio Installer

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Visual Studio:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Visual Studio Installer**

2. –ù–∞–∂–º–∏—Ç–µ **"–ò–∑–º–µ–Ω–∏—Ç—å"** (Modify) –¥–ª—è –≤–∞—à–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Visual Studio

3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"** (Individual components)

4. –ù–∞–π–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ:

   - ‚úÖ **MSVC v143 - VS 2022 C++ x64/x86 build tools**
   - ‚úÖ **Windows 10/11 SDK**

5. –ù–∞–∂–º–∏—Ç–µ **"–ò–∑–º–µ–Ω–∏—Ç—å"** (Modify)

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Microsoft Visual C++ 14.0 or greater is required"

**–†–µ—à–µ–Ω–∏–µ:**

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É Build Tools:**

   ```powershell
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
   Get-ChildItem "C:\Program Files\Microsoft Visual Studio" -ErrorAction SilentlyContinue
   Get-ChildItem "C:\Program Files (x86)\Microsoft Visual Studio" -ErrorAction SilentlyContinue
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞:**

   **–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Developer Command Prompt (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

   - –û—Ç–∫—Ä–æ–π—Ç–µ –º–µ–Ω—é –ü—É—Å–∫
   - –ù–∞–π–¥–∏—Ç–µ "Developer Command Prompt for VS 2022"
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ
   - –í —ç—Ç–æ–º –æ–∫–Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
     ```powershell
     cd D:\Sites\bachata
     .\venv\Scripts\Activate.ps1
     pip install madmom
     ```

   **–í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é –≤ PowerShell**

   ```powershell
   # –ù–∞–π–¥–∏—Ç–µ –ø—É—Ç—å –∫ vcvars64.bat (–º–æ–∂–µ—Ç –±—ã—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö)
   & "C:\Program Files\Microsoft Visual Studio\2022\BuildTools\VC\Auxiliary\Build\vcvars64.bat"
   # –ò–ª–∏
   & "C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Auxiliary\Build\vcvars64.bat"

   # –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
   where cl
   # –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏ –ø—É—Ç—å –∫ cl.exe
   ```

3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª** –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Build Tools

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Windows SDK:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Visual Studio Installer
   - –ù–∞–∂–º–∏—Ç–µ "–ò–∑–º–µ–Ω–∏—Ç—å" –¥–ª—è –≤–∞—à–µ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω "Windows 10/11 SDK"

### –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ madmom

**–†–µ—à–µ–Ω–∏–µ:**

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω **Windows SDK** (–≤—Ö–æ–¥–∏—Ç –≤ C++ build tools)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å pip: `python -m pip install --upgrade pip`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Cython: `pip install Cython`

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Build Tools –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 20-40 –º–∏–Ω—É—Ç, –∞ –∫–æ–º–ø–∏–ª—è—Ü–∏—è madmom - –µ—â–µ 5-15 –º–∏–Ω—É—Ç. –ù–∞–±–µ—Ä–∏—Ç–µ—Å—å —Ç–µ—Ä–ø–µ–Ω–∏—è! üòä

## –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Windows 10/11** (64-bit)
- **4 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞** –Ω–∞ –¥–∏—Å–∫–µ
- **–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è (~3-6 GB)

## –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ madmom:

1. –°–∫—Ä–∏–ø—Ç `analyze_beat.py` –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å madmom –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. –¢–æ—á–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è downbeats –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—Å—è
3. Fallback –Ω–∞ librosa –±–æ–ª—å—à–µ –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Visual Studio (–ª—é–±–∞—è –≤–µ—Ä—Å–∏—è), –≤–æ–∑–º–æ–∂–Ω–æ, Build Tools —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å madmom - –µ—Å–ª–∏ –æ—à–∏–±–∫–∏ –Ω–µ—Ç, –∑–Ω–∞—á–∏—Ç –≤—Å–µ –≥–æ—Ç–æ–≤–æ!
