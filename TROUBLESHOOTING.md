# Решение проблем

## Проблема: `a.filter is not a function` и ошибка 500 на `/api/tracks`

### Причина
1. База данных не подключена или не настроена
2. API возвращал объект ошибки вместо массива
3. Компонент пытался вызвать `.filter()` на не-массиве

### Решение
Исправлено в следующих файлах:

1. **`app/api/tracks/route.ts`** - теперь возвращает пустой массив при ошибках подключения к БД
2. **`app/page.tsx`** - добавлена проверка, что данные - массив перед использованием
3. **`components/Playlist.tsx`** - добавлена защита от не-массивов

### Результат
Приложение теперь работает даже без подключенной БД, показывая пустой список треков.

## Проблема: 404 ошибки для аудио файлов

### Причина
Аудио файлы еще не добавлены в проект.

### Решение
Добавьте файлы в соответствующие папки:
- `/public/audio/voice/one.mp3`
- `/public/audio/voice/five.mp3`
- `/public/audio/voice/1.mp3` до `8.mp3` (для режима Full)
- `/public/music/*.mp3` - музыкальные треки

Приложение будет работать без этих файлов, но голосовой счет не будет воспроизводиться.

## Проблема: Сообщения от расширений браузера

Сообщения типа:
```
[13:15:26] DEBUG Broadcast message created
[13:15:26] DEBUG Loading Cache
...
```

Это **не ошибки приложения**. Это сообщения от расширений браузера (Trust Wallet, TronLink, Bybit и т.д.). Их можно игнорировать.

## Быстрая проверка

1. **Проверьте консоль браузера** - должны остаться только предупреждения о 404 для аудио файлов (если они не добавлены)
2. **Проверьте Network tab** - `/api/tracks` должен возвращать статус 200 с пустым массивом `[]` (если БД не подключена)
3. **Приложение должно загружаться** без критических ошибок

## Следующие шаги

1. Настройте БД (см. `SETUP.md`)
2. Добавьте аудио файлы
3. Добавьте треки в БД через `npm run db:seed` или вручную

